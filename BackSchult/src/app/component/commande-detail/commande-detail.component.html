<div class="card" *ngIf="commande">
  <div class="card-header">
    <h3>Détails de la Commande #{{commande.id}}</h3>
  </div>

  <div class="card-body">
    <div class="grid">
      <div class="col-6">
        <p><strong>Date:</strong> {{commande.date | date:'dd/MM/yyyy'}}</p>
        <p><strong>Statut:</strong> 
          <span [ngClass]="{
            'status-badge': true,
            'status-en-cours': commande.status === 'EN_COURS',
            'status-validee': commande.status === 'VALIDEE',
            'status-annulee': commande.status === 'ANNULEE'
          }">
            {{commande.status}}
          </span>
        </p>
      </div>
      <div class="col-6">
        <p><strong>Montant Total:</strong> {{commande.totalAmount | currency:'EUR'}}</p>
        <p><strong>Fournisseur:</strong> {{commande.fournisseur?.name}}</p>
      </div>
    </div>

    <h4>Factures associées</h4>
    <p-table [value]="commande.factures || []" [loading]="loading">
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Date</th>
          <th>Montant</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-facture>
        <tr>
          <td>{{facture.id}}</td>
          <td>{{facture.date | date:'dd/MM/yyyy'}}</td>
          <td>{{facture.totalAmount | currency:'EUR'}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="empty">
        <tr>
          <td colspan="3">Aucune facture associée</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<p-toast></p-toast>