<div class="form-container">
  <div class="form-card">
    <div class="form-header">
      <h2><i class="pi pi-shopping-cart"></i> Ajouter une commande</h2>
      <p class="form-subtitle">Renseignez les informations de la commande</p>
    </div>

    <div class="form-body">
      <form [formGroup]="commandeForm" (ngSubmit)="onSubmit()">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label"><i class="pi pi-calendar"></i> Date</label>
            <p-calendar formControlName="date" dateFormat="yy-mm-dd" inputId="date" class="form-input"></p-calendar>
          </div>

          <div class="form-group">
            <label class="form-label"><i class="pi pi-flag"></i> Statut</label>
            <p-dropdown formControlName="status" [options]="[
                {label: 'En cours', value: 'EN_COURS'},
                {label: 'Validée', value: 'VALIDEE'},
                {label: 'Annulée', value: 'ANNULEE'}
              ]" placeholder="Sélectionner un statut" class="form-dropdown"></p-dropdown>
          </div>

          <div class="form-group">
            <label class="form-label"><i class="pi pi-dollar"></i> Montant total</label>
            <p-inputNumber formControlName="totalAmount" [min]="0" mode="currency" currency="EUR" class="form-input"></p-inputNumber>
          </div>

          <div class="form-group">
            <label class="form-label"><i class="pi pi-briefcase"></i> Fournisseur</label>
            <p-dropdown formControlName="fournisseurId" [options]="fournisseurs" optionLabel="name" optionValue="id" placeholder="Sélectionner un fournisseur" class="form-dropdown"></p-dropdown>
          </div>
        </div>

        <div *ngIf="error" class="error-message"><i class="pi pi-exclamation-circle"></i> {{ error }}</div>

        <div class="form-actions">
          <button pButton type="submit" label="Créer" class="btn btn-primary" [disabled]="loading || commandeForm.invalid"></button>
          <button pButton type="button" label="Annuler" class="btn btn-secondary" (click)="cancel()"></button>
        </div>

        <div *ngIf="loading" class="loading">Traitement...</div>
      </form>
    </div>
  </div>

  <p-toast></p-toast>
</div>
